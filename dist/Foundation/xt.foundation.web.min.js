!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NS=e():t.NS=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=function(t){function e(e){var o=t.call(this)||this;return o.buffer=e,o}return n(e,t),e.prototype.retain=function(){return this},e.prototype.release=function(){return this},e.initWithString=function(t){if("function"==typeof TextEncoder)return new e((new TextEncoder).encode(t).buffer);for(var o=unescape(encodeURIComponent(t)),n=new ArrayBuffer(o.length),r=new Uint8Array(n),i=0,s=o.length;i<s;i++)r[i]=o.charCodeAt(i);return new e(n)},e.initWithBytes=function(t){return new e(t.buffer)},e.initWithData=function(t){return new e(t.buffer.slice(0))},e.initWithBase64EncodedString=function(t){for(var o=window.atob(t),n=o.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=o.charCodeAt(i);return new e(r.buffer)},e.initWithBase64EncodedData=function(t){return this.initWithBase64EncodedString(String.fromCharCode.apply(null,new Uint8Array(t.buffer)))},e.prototype.isEqualTo=function(t){var e=new Uint8Array(this.buffer),o=new Uint8Array(t.buffer);return e.length==o.length&&e.every(function(t,e){return t===o[e]})},e.prototype.length=function(){return this.buffer.byteLength},e.prototype.getBytes=function(){return Uint8Array.from(_XTFData.getBytes(this.objectRef))},e.prototype.base64EncodedString=function(){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(this.buffer)))},e.prototype.base64EncodedData=function(){return e.initWithString(this.base64EncodedString())},e.prototype.utf8String=function(){return"function"==typeof TextDecoder?(new TextDecoder).decode(this.buffer):decodeURIComponent(escape(String.fromCharCode.apply(null,new Uint8Array(this.buffer))))},e.prototype.md5=function(){return"undefined"==typeof SparkMD5?(console.error("Please add <script src='https://cdn.jsdelivr.net/npm/spark-md5@3.0.0/spark-md5.min.js'><\/script> to HTML"),""):SparkMD5.ArrayBuffer.hash(this.buffer).toUpperCase()},e.prototype.sha1=function(){return"undefined"==typeof sha1?(console.error("Please add <script src='https://cdn.jsdelivr.net/npm/js-sha1@0.6.0/build/sha1.min.js'><\/script> to HTML"),""):sha1(new Uint8Array(this.buffer)).toUpperCase()},e}(r.Data);e.Data=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(10);e.URLCachePolily=r.URLCachePolily;var i=function(t){function o(o,n,r){void 0===n&&(n=15),void 0===r&&(r=e.URLCachePolily.UseProtocolCachePolicy);var i=t.call(this,o,n,r)||this;return i.url=o,i.timeout=n,i.cachePolicy=r,i.HTTPMethod="GET",i.HTTPBody=void 0,i.HTTPHeaders={},i}return n(o,t),o.prototype.buildRequest=function(){var t=new XMLHttpRequest;t.timeout=1e3*this.timeout,t.responseType="arraybuffer",t.open(this.HTTPMethod,this.url,!0);for(var e in this.HTTPHeaders)this.HTTPHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.HTTPHeaders[e]);return{request:t,body:this.HTTPBody}},o.prototype.setHTTPMethod=function(t){this.HTTPMethod=t},o.prototype.setHTTPHeader=function(t,e){this.HTTPHeaders[e]=t},o.prototype.setHTTPBody=function(t){this.HTTPBody=t},o.prototype.retain=function(){return this},o.prototype.release=function(){return this},o}(r.URLRequest);e.URLRequest=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(11),i=function(t){function e(e){var o=t.call(this)||this;return o.req=e,o}return n(e,t),Object.defineProperty(e.prototype,"expectedContentLength",{get:function(){return parseInt(this.req.getResponseHeader("Content-Type")||"0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suggestedFilename",{get:function(){var t=this.req.getResponseHeader("Content-Disposition")||"Unknown";return t.indexOf("filename=")>=0?t.split("filename=").pop().replace(/\"/,"").trim():"Unknown"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mimeType",{get:function(){var t=this.req.getResponseHeader("Content-Type")||"";return t.indexOf(";")>=0?t.split(";")[0].trim():t.trim()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textEncodingName",{get:function(){var t=this.req.getResponseHeader("Content-Type")||"";return t.indexOf("charset=")>=0?t.split("charset=").pop().trim():"UTF-8"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.req.responseURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allHeaderFields",{get:function(){var t={};return this.req.getAllResponseHeaders().split("\n").forEach(function(e){var o=e.indexOf(": ");if(o>=0){var n=e.substring(0,o).replace(/\b[a-z]/g,function(t){return t.toUpperCase()}).trim(),r=e.substring(o+2).trim();t[n]=r}}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.req.status},enumerable:!0,configurable:!0}),e}(r.URLResponse);e.URLResponse=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(14),i=o(0),s=o(2),u=function(t){function e(e,o,n){var r=t.call(this)||this;return r.xmlReuqest=e,r.body=o,r.completionHandler=n,r}return n(e,t),e.prototype.retain=function(){return this},e.prototype.release=function(){return this},e.prototype.cancel=function(){this.xmlReuqest.abort()},e.prototype.resume=function(){var t=this;this.xmlReuqest.addEventListener("loadend",function(){var e=t.xmlReuqest.response instanceof ArrayBuffer?i.Data.initWithBytes(new Uint8Array(t.xmlReuqest.response)):void 0,o=new s.URLResponse(t.xmlReuqest);t.completionHandler(e,o,void 0)}),this.xmlReuqest.addEventListener("error",function(e,o){t.completionHandler(void 0,void 0,o.error)}),this.body instanceof i.Data?this.xmlReuqest.send(this.body.buffer):"string"==typeof this.body?this.xmlReuqest.send(this.body):this.xmlReuqest.send()},e}(r.URLSessionTask);e.URLSessionTask=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),r=o(6),i=o(8),s=o(1),u=o(2),a=o(12),c=o(3),p=o(15),f=o(17);t.exports={Data:n.Data,FileManager:r.FileManager,Notification:i.Notification,NotificationCenter:i.NotificationCenter,URLRequest:s.URLRequest,URLCachePolily:s.URLCachePolily,URLResponse:u.URLResponse,URLSession:a.URLSession,URLSessionTask:c.URLSessionTask,UserDefaults:p.UserDefaults,WebSocket:f.WebSocket}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.retain=function(){throw new Error("Method not implemented.")},t.prototype.release=function(){throw new Error("Method not implemented.")},t.initWithString=function(t){throw Error("Not implemented.")},t.initWithBytes=function(t){throw Error("Not implemented.")},t.initWithData=function(t){throw Error("Not implemented.")},t.initWithBase64EncodedString=function(t){throw Error("Not implemented.")},t.initWithBase64EncodedData=function(t){throw Error("Not implemented.")},t.prototype.isEqualTo=function(t){throw Error("Not implemented.")},t.prototype.length=function(){throw Error("Not implemented.")},t.prototype.getBytes=function(){throw Error("Not implemented.")},t.prototype.base64EncodedString=function(){throw Error("Not implemented.")},t.prototype.base64EncodedData=function(){throw Error("Not implemented.")},t.prototype.utf8String=function(){throw Error("Not implemented.")},t.prototype.md5=function(){throw Error("Not implemented.")},t.prototype.sha1=function(){throw Error("Not implemented.")},t}();e.Data=n},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),i=o(7),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.writeData=function(t,e){if("undefined"==typeof pako)return console.error("Please add <script src='https://cdn.jsdelivr.net/npm/pako@1.0.6/dist/pako.min.js'><\/script> to HTML"),!1;if(t.buffer.byteLength>102400)return console.error("Can not write data byteLength > 100K."),!1;if(3==this.location)return console.error("Not support sdcard FileManager."),!1;var o=this.buildURL(e);try{return this.storage.setItem(o,pako.deflate(new Uint8Array(t.buffer),{to:"string"})),!0}catch(t){return console.error(t),!1}},e.prototype.readData=function(t){if("undefined"==typeof pako)return void console.error("Please add <script src='https://cdn.jsdelivr.net/npm/pako@1.0.6/dist/pako.min.js'><\/script> to HTML");if(3==this.location)return void console.error("Not support sdcard FileManager.");var e=this.buildURL(t);try{var o=this.storage.getItem(e);return void 0!==o&&null!==o?r.Data.initWithBytes(pako.inflate(o)):void 0}catch(t){return}},e.prototype.isFileExist=function(t){if(3==this.location)return console.error("Not support sdcard FileManager."),!1;var e=this.buildURL(t),o=this.storage.getItem(e);return void 0!==o&&null!==o},e.prototype.deleteFile=function(t){return 3==this.location?(console.error("Not support sdcard FileManager."),!1):(this.storage.removeItem(this.buildURL(t)),!0)},e.prototype.list=function(t){for(var e=this.buildURL(t),o=[],n=0;n<this.storage.length;n++){var r=this.storage.key(n);"string"==typeof r&&0===r.indexOf(e)&&o.push(r.replace(e,""))}return o},Object.defineProperty(e.prototype,"storage",{get:function(){return 2===this.location||1===this.location?sessionStorage:localStorage},enumerable:!0,configurable:!0}),e.prototype.buildURL=function(t){return 0===t.indexOf("/")&&(t=t.substring(1)),0==this.location?"file:///document/"+t:1==this.location?"file:///cache/"+t:2==this.location?"file:///tmp/"+t:"file://404/"},e.document=new e(0),e.cache=new e(1),e.tmp=new e(2),e.sdcard=new e(3),e}(i.FileManager);e.FileManager=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.location=t}return t.prototype.writeData=function(t,e){return!1},t.prototype.readData=function(t){},t.prototype.isFileExist=function(t){return!1},t.prototype.deleteFile=function(t){return!1},t.prototype.list=function(t){return[]},t.document=new t(0),t.cache=new t(1),t.tmp=new t(2),t.sdcard=new t(3),t}();e.FileManager=n},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(9),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.Notification);e.Notification=i;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.observers=[],e}return n(e,t),e.prototype.addObserver=function(t,e){var o=performance.now().toString()+"-"+Math.random()+"-"+Math.random();return this.observers.push({name:t,handler:o,triggerBlock:e}),o},e.prototype.removeObserver=function(t){this.observers=this.observers.filter(function(e){return e.handler!==t})},e.prototype.postNotification=function(t,e,o){this.onNotification(t,e,o)},e.prototype.onNotification=function(t,e,o){var n=new i(t,e,o);this.observers.forEach(function(e){e.name===t&&e.triggerBlock(n)})},e.default=new e,e}(r.NotificationCenter);e.NotificationCenter=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,o){this.name=t,this.object=e,this.userInfo=o}return t}();e.Notification=n;var r=function(){function t(){}return t.prototype.addObserver=function(t,e){throw"Not implemented."},t.prototype.removeObserver=function(t){throw"Not implemented."},t.prototype.postNotification=function(t,e,o){throw"Not implemented."},t}();e.NotificationCenter=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t[t.UseProtocolCachePolicy=0]="UseProtocolCachePolicy",t[t.ReloadIgnoringLocalCacheData=1]="ReloadIgnoringLocalCacheData",t[t.ReturnCacheDataElseLoad=2]="ReturnCacheDataElseLoad",t[t.ReturnCacheDataDontLoad=3]="ReturnCacheDataDontLoad"}(n=e.URLCachePolily||(e.URLCachePolily={}));var r=function(){function t(t,e,o){void 0===e&&(e=15),void 0===o&&(o=n.UseProtocolCachePolicy),this.url=t,this.timeout=e,this.cachePolicy=o}return t.prototype.setHTTPMethod=function(t){},t.prototype.setHTTPHeader=function(t,e){},t.prototype.setHTTPBody=function(t){},t.prototype.retain=function(){throw new Error("Method not implemented.")},t.prototype.release=function(){throw new Error("Method not implemented.")},t}();e.URLRequest=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t}();e.URLResponse=n},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(13),i=o(1),s=o(3),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.dataTaskWithURL=function(t,e){var o=new i.URLRequest(t,15,0);return this.dataTaskWithRequest(o,e)},e.prototype.dataTaskWithRequest=function(t,e){var o=t.buildRequest(),n=o.request,r=o.body;return new s.URLSessionTask(n,r,e)},e.sharedSession=new e,e}(r.URLSession);e.URLSession=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.dataTaskWithURL=function(t,e){throw Error("Not implemented.")},t.prototype.dataTaskWithRequest=function(t,e){throw Error("Not implemented.")},t}();e.URLSession=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.retain=function(){throw new Error("Method not implemented.")},t.prototype.release=function(){throw new Error("Method not implemented.")},t.prototype.cancel=function(){},t.prototype.resume=function(){},t}();e.URLSessionTask=n},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(16),i=function(t){function e(e){void 0===e&&(e=void 0);var o=t.call(this,e)||this;return o.suite=e,o}return n(e,t),e.prototype.set=function(t,e){var o=JSON.stringify({forKey:e,suite:this.suite||"Default"});void 0===t?localStorage.removeItem(o):localStorage.setItem(o,JSON.stringify({value:t}))},e.prototype.get=function(t){var e=JSON.stringify({forKey:t,suite:this.suite||"Default"});try{return JSON.parse(localStorage.getItem(e)||"{}").value}catch(t){return}},e.standard=new e,e}(r.UserDefaults);e.UserDefaults=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=void 0)}return t.prototype.set=function(t,e){},t.prototype.get=function(t){},t}();e.UserDefaults=n},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(18),i=o(0),s=function(t){function e(e){var o=t.call(this,e)||this;return o.socket=new window.WebSocket(e),o.socket.addEventListener("open",function(){o.onOpen&&o.onOpen()}),o.socket.addEventListener("close",function(t,e){o.onClose&&o.onClose(e.code,e.reason)}),o.socket.addEventListener("error",function(t,e){o.onFail&&o.onFail(new Error(e.message))}),o.socket.addEventListener("message",function(t){t.data instanceof ArrayBuffer?o.onMessage&&o.onMessage(i.Data.initWithBytes(new Uint8Array(t.data))):"string"==typeof t.data&&o.onMessage&&o.onMessage(t.data)}),o}return n(e,t),e.prototype.sendData=function(t){this.socket.send(t.buffer)},e.prototype.sendString=function(t){this.socket.send(t)},e.prototype.close=function(){this.socket.close()},e.prototype.retain=function(){return this},e.prototype.release=function(){return this},e}(r.WebSocket);e.WebSocket=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){}return t.prototype.retain=function(){throw new Error("Method not implemented.")},t.prototype.release=function(){throw new Error("Method not implemented.")},t.prototype.sendData=function(t){},t.prototype.sendString=function(t){},t.prototype.close=function(){},t}();e.WebSocket=n}])});
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NS=e():t.NS=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,void 0,!1)||this;return n.buffer=e,n}return o(e,t),e.initWithString=function(t){if("function"==typeof TextEncoder)return new e((new TextEncoder).encode(t).buffer);for(var n=unescape(encodeURIComponent(t)),o=new ArrayBuffer(n.length),r=new Uint8Array(o),i=0,s=n.length;i<s;i++)r[i]=n.charCodeAt(i);return new e(o)},e.initWithBytes=function(t){return new e(t.buffer)},e.initWithData=function(t){return new e(t.buffer.slice(0))},e.initWithBase64EncodedString=function(t){for(var n=window.atob(t),o=n.length,r=new Uint8Array(o),i=0;i<o;i++)r[i]=n.charCodeAt(i);return new e(r.buffer)},e.initWithBase64EncodedData=function(t){return this.initWithBase64EncodedString(String.fromCharCode.apply(null,new Uint8Array(t.buffer)))},e.prototype.isEqualTo=function(t){var e=new Uint8Array(this.buffer),n=new Uint8Array(t.buffer);return e.length==n.length&&this.every(e,function(t,e){return t===n[e]})},e.prototype.every=function(t,e){if("function"==typeof t.every)return t.every(e);for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},e.prototype.length=function(){return this.buffer.byteLength},e.prototype.getBytes=function(){return Uint8Array.from(_XTFData.getBytes(this.objectRef))},e.prototype.base64EncodedString=function(){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(this.buffer)))},e.prototype.base64EncodedData=function(){return e.initWithString(this.base64EncodedString())},e.prototype.utf8String=function(){return"function"==typeof TextDecoder?(new TextDecoder).decode(this.buffer):decodeURIComponent(escape(String.fromCharCode.apply(null,new Uint8Array(this.buffer))))},e.prototype.md5=function(){return"undefined"==typeof SparkMD5?(console.error("Please add <script src='https://cdn.jsdelivr.net/npm/spark-md5@3.0.0/spark-md5.min.js'><\/script> to HTML"),""):SparkMD5.ArrayBuffer.hash(this.buffer).toUpperCase()},e.prototype.sha1=function(){return"undefined"==typeof sha1?(console.error("Please add <script src='https://cdn.jsdelivr.net/npm/js-sha1@0.6.0/build/sha1.min.js'><\/script> to HTML"),""):sha1(new Uint8Array(this.buffer)).toUpperCase()},e}(XT.BaseObject);e.Data=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9);e.URLCachePolily=r.URLCachePolily;var i=function(t){function n(n,o,r){void 0===o&&(o=15),void 0===r&&(r=e.URLCachePolily.UseProtocolCachePolicy);var i=t.call(this,void 0,!1)||this;return i.url=n,i.timeout=o,i.cachePolicy=r,i.HTTPMethod="GET",i.HTTPBody=void 0,i.HTTPHeaders={},i}return o(n,t),n.prototype.buildRequest=function(){var t=new XMLHttpRequest;t.timeout=1e3*this.timeout,t.responseType="arraybuffer",t.open(this.HTTPMethod,this.url,!0);for(var e in this.HTTPHeaders)this.HTTPHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.HTTPHeaders[e]);return{request:t,body:this.HTTPBody}},n.prototype.setHTTPMethod=function(t){this.HTTPMethod=t},n.prototype.setHTTPHeader=function(t,e){this.HTTPHeaders[e]=t},n.prototype.setHTTPBody=function(t){this.HTTPBody=t},n.prototype.retain=function(){return this},n.prototype.release=function(){return this},n}(XT.BaseObject);e.URLRequest=i},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,void 0,!1)||this;return n.req=e,n}return o(e,t),Object.defineProperty(e.prototype,"expectedContentLength",{get:function(){return parseInt(this.req.getResponseHeader("Content-Type")||"0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suggestedFilename",{get:function(){var t=this.req.getResponseHeader("Content-Disposition")||"Unknown";return t.indexOf("filename=")>=0?t.split("filename=").pop().replace(/\"/,"").trim():"Unknown"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mimeType",{get:function(){var t=this.req.getResponseHeader("Content-Type")||"";return t.indexOf(";")>=0?t.split(";")[0].trim():t.trim()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textEncodingName",{get:function(){var t=this.req.getResponseHeader("Content-Type")||"";return t.indexOf("charset=")>=0?t.split("charset=").pop().trim():"UTF-8"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.req.responseURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allHeaderFields",{get:function(){var t={};return this.req.getAllResponseHeaders().split("\n").forEach(function(e){var n=e.indexOf(": ");if(n>=0){var o=e.substring(0,n).replace(/\b[a-z]/g,function(t){return t.toUpperCase()}).trim(),r=e.substring(n+2).trim();t[o]=r}}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.req.status},enumerable:!0,configurable:!0}),e}(XT.BaseObject);e.URLResponse=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),s=function(t){function e(e,n,o){var r=t.call(this,void 0,!1)||this;return r.xmlReuqest=e,r.body=n,r.completionHandler=o,r}return o(e,t),e.prototype.cancel=function(){this.xmlReuqest.abort()},e.prototype.resume=function(){var t=this;this.xmlReuqest.addEventListener("loadend",function(){var e=t.xmlReuqest.response instanceof ArrayBuffer?r.Data.initWithBytes(new Uint8Array(t.xmlReuqest.response)):void 0,n=new i.URLResponse(t.xmlReuqest);t.completionHandler(e,n,void 0)}),this.xmlReuqest.addEventListener("error",function(e,n){t.completionHandler(void 0,void 0,n.error)}),this.body instanceof r.Data?this.xmlReuqest.send(this.body.buffer):"string"==typeof this.body?this.xmlReuqest.send(this.body):this.xmlReuqest.send()},e}(XT.BaseObject);e.URLSessionTask=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(5),i=n(7),s=n(1),a=n(2),u=n(10),c=n(3),f=n(11),p=n(13);t.exports={Data:o.Data,FileManager:r.FileManager,Notification:i.Notification,NotificationCenter:i.NotificationCenter,URLRequest:s.URLRequest,URLCachePolily:s.URLCachePolily,URLResponse:a.URLResponse,URLSession:u.URLSession,URLSessionTask:c.URLSessionTask,UserDefaults:f.UserDefaults,WebSocket:p.WebSocket}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.writeData=function(t,e){if("undefined"==typeof pako)return console.error("Please add <script src='https://cdn.jsdelivr.net/npm/pako@1.0.6/dist/pako.min.js'><\/script> to HTML"),!1;if(t.buffer.byteLength>102400)return console.error("Can not write data byteLength > 100K."),!1;if(3==this.location)return console.error("Not support sdcard FileManager."),!1;var n=this.buildURL(e);try{return this.storage.setItem(n,pako.deflate(new Uint8Array(t.buffer),{to:"string"})),!0}catch(t){return console.error(t),!1}},e.prototype.readData=function(t){if("undefined"==typeof pako)return void console.error("Please add <script src='https://cdn.jsdelivr.net/npm/pako@1.0.6/dist/pako.min.js'><\/script> to HTML");if(3==this.location)return void console.error("Not support sdcard FileManager.");var e=this.buildURL(t);try{var n=this.storage.getItem(e);return void 0!==n&&null!==n?r.Data.initWithBytes(pako.inflate(n)):void 0}catch(t){return}},e.prototype.isFileExist=function(t){if(3==this.location)return console.error("Not support sdcard FileManager."),!1;var e=this.buildURL(t),n=this.storage.getItem(e);return void 0!==n&&null!==n},e.prototype.deleteFile=function(t){return 3==this.location?(console.error("Not support sdcard FileManager."),!1):(this.storage.removeItem(this.buildURL(t)),!0)},e.prototype.list=function(t){for(var e=this.buildURL(t),n=[],o=0;o<this.storage.length;o++){var r=this.storage.key(o);"string"==typeof r&&0===r.indexOf(e)&&n.push(r.replace(e,""))}return n},Object.defineProperty(e.prototype,"storage",{get:function(){return 2===this.location||1===this.location?sessionStorage:localStorage},enumerable:!0,configurable:!0}),e.prototype.buildURL=function(t){return 0===t.indexOf("/")&&(t=t.substring(1)),0==this.location?"file:///document/"+t:1==this.location?"file:///cache/"+t:2==this.location?"file:///tmp/"+t:"file://404/"},e.document=new e(0),e.cache=new e(1),e.tmp=new e(2),e.sdcard=new e(3),e}(i.FileManager);e.FileManager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.location=t}return t.prototype.writeData=function(t,e){return!1},t.prototype.readData=function(t){},t.prototype.isFileExist=function(t){return!1},t.prototype.deleteFile=function(t){return!1},t.prototype.list=function(t){return[]},t.document=new t(0),t.cache=new t(1),t.tmp=new t(2),t.sdcard=new t(3),t}();e.FileManager=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r.Notification);e.Notification=i;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.observers=[],e}return o(e,t),e.prototype.addObserver=function(t,e){var n=performance.now().toString()+"-"+Math.random()+"-"+Math.random();return this.observers.push({name:t,handler:n,triggerBlock:e}),n},e.prototype.removeObserver=function(t){this.observers=this.observers.filter(function(e){return e.handler!==t})},e.prototype.postNotification=function(t,e,n){this.onNotification(t,e,n)},e.prototype.onNotification=function(t,e,n){var o=new i(t,e,n);this.observers.forEach(function(e){e.name===t&&e.triggerBlock(o)})},e.default=new e,e}(r.NotificationCenter);e.NotificationCenter=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,n){this.name=t,this.object=e,this.userInfo=n}return t}();e.Notification=o;var r=function(){function t(){}return t.prototype.addObserver=function(t,e){throw"Not implemented."},t.prototype.removeObserver=function(t){throw"Not implemented."},t.prototype.postNotification=function(t,e,n){throw"Not implemented."},t}();e.NotificationCenter=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r;!function(t){t[t.UseProtocolCachePolicy=0]="UseProtocolCachePolicy",t[t.ReloadIgnoringLocalCacheData=1]="ReloadIgnoringLocalCacheData",t[t.ReturnCacheDataElseLoad=2]="ReturnCacheDataElseLoad",t[t.ReturnCacheDataDontLoad=3]="ReturnCacheDataDontLoad"}(r=e.URLCachePolily||(e.URLCachePolily={}));var i=function(t){function e(e,n,o){void 0===n&&(n=15),void 0===o&&(o=r.UseProtocolCachePolicy);var i=t.call(this)||this;return i.url=e,i.timeout=n,i.cachePolicy=o,i}return o(e,t),e.prototype.setHTTPMethod=function(t){},e.prototype.setHTTPHeader=function(t,e){},e.prototype.setHTTPBody=function(t){},e}(XT.BaseObject);e.URLRequest=i},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.dataTaskWithURL=function(t,e){var n=new r.URLRequest(t,15,0);return this.dataTaskWithRequest(n,e)},e.prototype.dataTaskWithRequest=function(t,e){var n=t.buildRequest(),o=n.request,r=n.body;return new i.URLSessionTask(o,r,e)},e.sharedSession=new e,e}(XT.BaseObject);e.URLSession=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=function(t){function e(e){void 0===e&&(e=void 0);var n=t.call(this,e)||this;return n.suite=e,n}return o(e,t),e.prototype.set=function(t,e){var n=JSON.stringify({forKey:e,suite:this.suite||"Default"});void 0===t?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify({value:t}))},e.prototype.get=function(t){var e=JSON.stringify({forKey:t,suite:this.suite||"Default"});try{return JSON.parse(localStorage.getItem(e)||"{}").value}catch(t){return}},e.standard=new e,e}(r.UserDefaults);e.UserDefaults=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t=void 0)}return t.prototype.set=function(t,e){},t.prototype.get=function(t){},t}();e.UserDefaults=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){function e(e){var n=t.call(this,void 0,!1)||this;return n.url=e,n.socket=new window.WebSocket(e),n.socket.addEventListener("open",function(){n.onOpen&&n.onOpen()}),n.socket.addEventListener("close",function(t,e){n.onClose&&n.onClose(e.code,e.reason)}),n.socket.addEventListener("error",function(t,e){n.onFail&&n.onFail(new Error(e.message))}),n.socket.addEventListener("message",function(t){t.data instanceof ArrayBuffer?n.onMessage&&n.onMessage(r.Data.initWithBytes(new Uint8Array(t.data))):"string"==typeof t.data&&n.onMessage&&n.onMessage(t.data)}),n}return o(e,t),e.prototype.sendData=function(t){this.socket.send(t.buffer)},e.prototype.sendString=function(t){this.socket.send(t)},e.prototype.close=function(){this.socket.close()},e}(XT.BaseObject);e.WebSocket=i}])});